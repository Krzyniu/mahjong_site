<h1>Lista meczy</h1>


<% @matches.each do |match| %>

<div class="jumbo2 card card">
  <div class="p-2">
    <div class="row border bg-light">
      <div class="col-sm-1">Data</div>
      <div class="col-sm"><%= match.created_at %></div>
    </div>
    <div class="row">
      <div class="col-sm-1 border bg-light">Gracze:</div>

      <%if User.find_by_id(match.player_1_id).username.blank?%>
        <div class="col-sm-2"><%= link_to User.find_by_id(match.player_1_id).email, user_path(User.find_by_id(match.player_1_id)) %></div>
      <%else%>
        <div class="col-sm-2"><%= link_to User.find_by_id(match.player_1_id).username, user_path(User.find_by_id(match.player_1_id)) %></div>
      <%end%>

      <%if User.find_by_id(match.player_2_id).username.blank?%>
        <div class="col-sm-2"><%= link_to User.find_by_id(match.player_2_id).email, user_path(User.find_by_id(match.player_2_id)) %></div>
      <%else%>
        <div class="col-sm-2"><%= link_to User.find_by_id(match.player_2_id).username, user_path(User.find_by_id(match.player_2_id)) %></div>
      <%end%>

      <%if User.find_by_id(match.player_3_id).username.blank?%>
        <div class="col-sm-2"><%= link_to User.find_by_id(match.player_3_id).email, user_path(User.find_by_id(match.player_3_id)) %></div>
      <%else%>
        <div class="col-sm-2"><%= link_to User.find_by_id(match.player_3_id).username, user_path(User.find_by_id(match.player_3_id)) %></div>
      <%end%>

      <%if User.find_by_id(match.player_4_id).username.blank?%>
        <div class="col-sm-2"><%= link_to User.find_by_id(match.player_4_id).email, user_path(User.find_by_id(match.player_4_id)) %></div>
      <%else%>
        <div class="col-sm-2"><%= link_to User.find_by_id(match.player_4_id).username, user_path(User.find_by_id(match.player_4_id)) %></div>
      <%end%>

    </div>
    <div class="row">
      <div class="col-sm-1 border bg-light">Wyniki:</div>
      <div class="col-sm-2"><%= match.player_1_score %></div>
      <div class="col-sm-2"><%= match.player_2_score %></div>
      <div class="col-sm-2"><%= match.player_3_score %></div>
      <div class="col-sm-2"><%= match.player_4_score %></div>
    </div>
    <div class="row">
      <div class="col-sm-1 border bg-light">Liga:</div>
      <div class="col-sm-2"><%=League.find_by_id(match.league_id).name %></div>
    </div>

    <div class="row">
      <% if signed_in? %>
        <% if current_user.is_admin%>
          <div class="btn btn-danger"><%= link_to 'UsuÅ„', match_path(match),
            method: :delete,
            data: { confirm: 'Are you sure?' } %></div>
        <% end %>
      <% end %>
      
    </div>

  </div>
</div>

<% end %>

<div class="jumbo2 card card">
<div class="row justify-content-center">
  <%= will_paginate @matches, previous_label:"Wstecz", next_label:"Do przodu"   %>
</div>
</div>